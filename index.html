<!DOCTYPE html>

<head>
    <title>Martino Papa</title>
    <link rel="icon" type="image/x-icon" href="img/icon.svg">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <div class="center">
        <h3>Ciao sono Martino, da poco laureato in Matematica</h3>
        <h2>Se ti servono ripetizioni di</h2>
        <h4>Matematica</h4>
        <h4>Informatica</h4>
        <h4>Fisica</h4>
        <h2>Contattami</h2>
        <h4><a target="_blank" href="https://wa.me/3938885176"><img src = "img/whatsapp.svg" alt="Whatsapp"/></a></h4>
        <h2>O se preferisci inserisci il tuo numero e ti contatterò io</h2>
        <form name="contact" method="POST" data-netlify="true" netlify>
            <input name="telefono" placeholder="numero di telefono" type="tel" tabindex="3"
                    pattern="[0-9]{10}" title="inserisci un numero di telefono valido" required>
            <button name="submit" type="submit" id="contact-submit" data-submit="...Sending"><span class="material-icons">send</span></button>
        </form>
        <p>Lascio qui il link al mio sito un po più serio in caso vogliate consultare il mio curriculum o farvi gli affari miei: <a href="https://martinopapa.netlify.app/#">Il mio bel sito</a></p>
    </div>
</body>

<script type="text/javascript">
    const handleSubmit = (event) => {
        event.preventDefault();

        const myForm = event.target;
        const formData = new FormData(myForm);
        var button = document.getElementById("contact-submit");
        button.disabled = true;

        fetch("/", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new URLSearchParams(formData).toString(),
        })
            .then(() => {
                console.log("Form successfully submitted")
                alert("Grazie, ti contatterò appena possibile!");
            })
            .catch((error) => {
                alert("sembra che qualcosa sia andato storto, si prega di riprovare. Se il proplema persiste potete contattarmi via mail o whatsapp");
                button.innerHTML = `Invia`;
                button.disabled = false;
            });      
    };

    document
        .querySelector("form")
        .addEventListener("submit", handleSubmit);
</script>