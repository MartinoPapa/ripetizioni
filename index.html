<!DOCTYPE html>
<html lang="ita">

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./style.css">
	<title>Martino Papa</title>
	<link rel="icon" type="image/x-icon" href="img/icon.svg">
</head>

<body>
	<!-- partial:index.partial.html -->
	<div class="whatsapp-chat center">
		<div class="whatsapp-chat-window">
			<div class="whatsapp-chat-header">
				<img src="img/me.enc" class="whatsapp-chat-contact-img">
				<div class="whatsapp-chat-contact-info">
					<strong>Martino</strong>
					<small>
						Ripetizioni
						•
						<span class="text-wa-light-green">Online</span>
					</small>
				</div>
			</div>
			<div class="whatsapp-chat-body">
				<p class="whatsapp-chat-bubble">
					Ciao sono Martino, da poco mi sono laureato in Matematica.
				</p>
				<p class="whatsapp-chat-bubble">
					<span>Ti servono ripetizioni di Matematica, Informatica o Fisica?</span> Contattami direttamente da
					qui, risponderò il prima possibile.
				</p>
				<form method="POST" data-netlify="true" netlify>
					<label for="whatsapp-name" class="whatsapp-chat-green-bubble">
						<fieldset>
							<input name="nome" type="text" id="whatsapp-name" placeholder="Nominativo" required
								class="whatsapp-chat-input">
						</fieldset>
					</label>
					<label for="whatsapp-phone" class="whatsapp-chat-green-bubble">
						<fieldset>
							<input name="telefono" type="tel" id="whatsapp-phone" placeholder="Numero di telefono" pattern="[0-9]{10}"
								title="inserisci un numero di telefono valido" required class="whatsapp-chat-input">
						</fieldset>
					</label>
					<button type="submit" class="whatsapp-chat-btn" id="contact-submit">
						INVIA
					</button>
				</form>
				<p class="whatsapp-chat-bubble">
					Se vuoi scoprire di più su di me ecco il link al mio
					<a href="CV-ITA.pdf" target="_blank">curriculum</a>.
				</p>
				<p class="whatsapp-chat-bubble">
					Whatsapp: <a href="https://wa.me/3938885176">393-888-5176</a><br>
					Email: <a href="mailto:martino.papa.tn@gmail.com">martino.papa.tn@gmail.com</a><br>
					Instagram: <a href="https://www.instagram.com/martino_papa/" target="_blank">martino_papa</a>
				</p>
			</div>
		</div>
	</div>
	<!-- partial -->

</body>
<script type="text/javascript">
	const handleSubmit = (event) => {
		event.preventDefault();

		const myForm = event.target;
		console.log(myForm)
		const formData = new FormData(myForm);
		var button = document.getElementById("contact-submit");
		button.disabled = true;
		button.innerHTML = "Attendere..."

		fetch("/", {
			method: "POST",
			headers: { "Content-Type": "application/x-www-form-urlencoded" },
			body: new URLSearchParams(...formData).toString(),
		})
			.then(() => {
				console.log("Form successfully submitted")
				button.innerHTML = "Messaggio Inviato!"
			})
			.catch((error) => {
				alert("sembra che qualcosa sia andato storto, si prega di riprovare. Se il proplema persiste potete contattarmi via mail o whatsapp");
				button.innerHTML = `Invia`;
				button.disabled = false;
			});
	};

	document
		.querySelector("form")
		.addEventListener("submit", handleSubmit);
</script>

</html>